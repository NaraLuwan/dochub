## 工作原理
Telegraf 是一个开源数据收集Agent，基于插件驱动。本身提供的输入和输出插件非常丰富，主要用于收集时间序列型数据，比如服务器CPU指标、内存指标、各种IoT设备产生的数据等。其工作流程如下图所示：

![](https://github.com/NaraLuwan/dochub/tree/master/images/2021111701.png)

定时去执行输入插件收集数据，数据经过处理插件和聚合插件，批量输出到数据存储。

Telegraf有四种类型的插件：

输入插件（Inputs）：收集各种时间序列性指标，包含各种系统信息和应用信息
处理插件（Process）：当收集到的指标数据流要进行一些简单处理时，比如给所有指标添加、删除、修改一个Tag，只针对当前的指标数据进行操作
聚合插件（Aggregate）：处理某段时间流经该插件的所有数据，每个聚合插件都有一个period设置，只会处理now()-period时间段内的数据，比如取最大值、最小值、平均值等操作
输出插件（Outputs）：收集到的数据，经过处理和聚合后，输出到数据存储系统，可以是各种地方，如：文件、InfluxDB、各种消息队列服务等